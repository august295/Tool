# spdlog



## 1. 快速入门

### 1.1. 线程安全

若要创建**线程安全**记录器，请使用 `_mt` 工厂函数。

```cpp
auto logger = spdlog::basic_logger_mt(...);
```

若要创建**单线程**记录器，请使用 `_st` 工厂函数。

```cpp
auto logger = spdlog::basic_logger_st(...);
```



## 2. 创建记录器



## 3. 自定义格式

### 3.1. 默认格式

每个记录器的接收器都有一个格式化程序，用于将消息格式化为其目标。

SPDLOG 的默认日志记录格式为：

```
[2014-10-31 23:46:59.678] [my_loggername] [info] Some message
```

有两种方法可以自定义记录器的格式：

- 设置模式字符串（推荐）：

```
set_pattern(pattern_string);
```

### 3.2. 自定义格式使用`set_pattern(..)`

格式可以全局应用于**所有已注册**的记录器：

```
spdlog::set_pattern("*** [%H:%M:%S %z] [thread %t] %v ***");
```

或特定**记录器**对象：

```
some_logger->set_pattern(">>>>>>>>> %H:%M:%S %z %v <<<<<<<<<");
```

或特定**接收器**对象：

```
some_logger->sinks()[0]->set_pattern(">>>>>>>>> %H:%M:%S %z %v <<<<<<<<<");
some_logger->sinks()[1]->set_pattern("..");
```

### 3.3. 匹配模式

模式标志的形式类似于 [strftime](http://www.cplusplus.com/reference/ctime/strftime/) 函数：`%flag`

| 标志       | 意义                                                | 示例                                                       |
| ---------- | --------------------------------------------------- | ---------------------------------------------------------- |
| `%v`       | 要记录的实际文本                                    | "some user text"                                           |
| `%t`       | 线程标识                                            | "1232"                                                     |
| `%P`       | 进程标识                                            | "3456"                                                     |
| `%n`       | 记录器的名称                                        | "some logger name"                                         |
| `%l`       | 消息的日志级别                                      | "debug", "info", etc                                       |
| `%L`       | 消息的短日志级别                                    | "D", "I", etc                                              |
| `%a`       | 工作日名称的缩写                                    | "Thu"                                                      |
| `%A`       | 工作日全名                                          | "Thursday"                                                 |
| `%b`       | 缩写月份名称                                        | "Aug"                                                      |
| `%B`       | 全月名称                                            | "August"                                                   |
| `%c`       | 日期和时间表示形式                                  | "Thu Aug 23 15:35:46 2014"                                 |
| `%C`       | 年份 2 位数                                         | "14"                                                       |
| `%Y`       | 年份（4 位数字）                                    | "2014"                                                     |
| `%D`或`%x` | 短月/日/年日期                                      | "08/23/14"                                                 |
| `%m`       | 01-12月                                             | "11"                                                       |
| `%d`       | 月中的某一天 01-31                                  | "29"                                                       |
| `%H`       | 小时数 24 格式 00-23                                | "23"                                                       |
| `%I`       | 小时 12 格式 01-12                                  | "11"                                                       |
| `%M`       | 分钟 00-59                                          | "59"                                                       |
| `%S`       | 秒 00-59                                            | "58"                                                       |
| `%e`       | 毫秒部分的当前秒 000-999                            | "678"                                                      |
| `%f`       | 微秒部分当前第二 000000-999999                      | "056789"                                                   |
| `%F`       | 纳秒部分当前第二 000000000-999999999                | "256789123"                                                |
| `%p`       | 上午/下午                                           | "AM"                                                       |
| `%r`       | 12小时制                                            | "02:55:02 PM"                                              |
| `%R`       | 24 小时 HH：MM 时间，相当于 %H：%M                  | "23:55"                                                    |
| `%T`或`%X` | ISO 8601 时间格式 （HH：MM：SS），相当于 %H：%M：%S | "23:55:59"                                                 |
| `%z`       | ISO 8601 与 UTC 时区的偏移量 （+/-]HH：MM）         | "+02:00"                                                   |
| `%E`       | 自纪元以来的秒数                                    | "1528834770"                                               |
| `%%`       | % 符号                                              | "%"                                                        |
| `%+`       | SPDLOG 的默认格式                                   | "[2014-10-31 23:46:59.678] [mylogger] [info] Some message" |
| `%^`       | 起始颜色范围（只能使用一次）                        | "[mylogger] [info(green)] Some message"                    |
| `%$`       | 结束颜色范围（例如 %^[+++]%$ %v）（只能使用一次）   | [+++] Some message                                         |
| `%@`       | 源文件和行                                          | some/dir/my_file.cpp:123                                   |
| `%s`       | 源文件的基本名称                                    | my_file.cpp                                                |
| `%g`       | 宏中显示的源文件的完整或相对路径                    | some/dir/my_file.cpp                                       |
| `%#`       | 源行                                                | 123                                                        |
| `%!`       | 源函数                                              | my_func                                                    |
| `%o`       | 自上一条消息以来经过的时间（以毫秒为单位）          | 456                                                        |
| `%i`       | 自上一条消息以来经过的时间（以微秒为单位）          | 456                                                        |
| `%u`       | 自上一条消息以来经过的时间（以纳秒为单位）          | 11456                                                      |
| `%O`       | 自上一条消息以来经过的时间（以秒为单位）            | 4                                                          |




# 参考

[1] [Home · gabime/spdlog Wiki (github.com)](https://github.com/gabime/spdlog/wiki)